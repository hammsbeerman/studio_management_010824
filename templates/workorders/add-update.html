{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block content %}

<style>
    .contact-form{
        border-bottom: 1px solid black;
    }
    .hidden{
        display: none
    }
</style>

<h1>Add / Update Workorder</h1> 
<p>
<h3>Customer: {{ object.customer }}</h3>
<a href='{{ object.get_absolute_url }}'>Back to Details</a></small><br/>

<div style='margin-top:30px;'>

    <!-- {{ form.customer.label_tag }}
        {% render_field form.customer class="custom-select mb-4" autocomplete="off" hx-get="/workorders/contact/" hx-target="#id_contact" %}
    -->
       <!-- {{ form.contact.label_tag }}
        {% render_field form.contact class="custom-select mb-4" autocomplete="off" %} -->

    {% include 'workorders/partials/forms.html' %}
    <p>
        <p>

          <!-- Modal Area -->
            <div class="container">
                <div class="px-5 my-5 text-center">
                  <h1>My Movie Collection</h1>
                  <p>A sample project that shows how to support modal forms with Django+HTMX with minimal JavaScript code.</p>
                </div>
                <table class="table">
                  <thead>
                    <tr>
                      <th>Title</th>
                      <th>Year</th>
                      <th>Rating</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody hx-trigger="load, movieListChanged from:body" hx-get="{% url 'workorders:movie_list' %}" hx-target="this">
                    <tr>
                      <td class="spinner-border" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <button hx-get="{% url 'workorders:add_movie' %}" hx-target="#dialog" class="btn btn-primary">
                Add a movie
                </button>
            </div>


    <div id="modal" class="modal fade">
        <div id="dialog" class="modal-dialog" hx-target="this"></div>
      </div>

      <!-- End of Modal -->
      
    <p>
    <p>
        {% if titles %}
        <!-- Add Services-->
        <h3>Items:</h3>
        <table class="table table-bordered">
        <thead>
            <tr>
                <th>Item</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Total Price</th>
            </tr>
        </thead>
        <tbody id="item_data">
        
        {% for item in object.get_item_children %}
            {% include 'workorders/partials/item-inline.html' with object=item %}
        {% endfor %}
        </tbody>
        </table>
        
        
        {% if new_item_url %}
        <div id='item-create'>

        </div>


        <button hx-get="{{ new_item_url }}" hx-trigger='click' hx-target='#item-create' hx-swap='beforeend'>Add Item</button>
        {% endif %}
        {% endif %}
    

    


</div>





{% endblock content %}